package com.usher.diboson;

import android.os.Bundle;
import android.view.View;
import android.widget.LinearLayout;

// =================================================================================
public class CrackedScreenActivity extends DibosonActivity
{
    // =============================================================================
    // 14/02/2020 ECU added 'crackedScreen' so that this activity cannot be called
    //                more than once
    // =============================================================================

    // =============================================================================
    private static boolean crackedScreen    = false;
    // =============================================================================

    // =============================================================================
    @Override
    protected void onCreate (Bundle savedInstanceState)
    {
        // -------------------------------------------------------------------------
        super.onCreate (savedInstanceState);
        // -------------------------------------------------------------------------
        if (savedInstanceState == null && !crackedScreen)
        {
            // ---------------------------------------------------------------------
            // 12/02/2020 ECU the activity has been created anew
            // ---------------------------------------------------------------------
            Utilities.SetUpActivity (this,StaticData.ACTIVITY_FULL_SCREEN);
            // ---------------------------------------------------------------------
            // 12/02/2020 ECU just display a dummy 'cracked screen'
            // ---------------------------------------------------------------------
            setContentView (R.layout.activity_cracked_screen);
            // ---------------------------------------------------------------------
            // 12/02/2020 ECU set the click listener for the layout
            // ---------------------------------------------------------------------
            ((LinearLayout) findViewById (R.id.cracked_screen)).setOnClickListener (new View.OnClickListener()
            {
                // -----------------------------------------------------------------
                @Override
                public void onClick (View view)
                {
                    // -------------------------------------------------------------
                    // 12/02/2020 ECU just finish this activity
                    // 14/02/2020 ECU changed to use the method
                    // -------------------------------------------------------------
                   finishActivity ();
                    // -------------------------------------------------------------
                }
                // -----------------------------------------------------------------
            });
            // ---------------------------------------------------------------------
            // 12/02/2020 ECU play the sound of breaking glass
            // ---------------------------------------------------------------------
            MessageHandler.playRawResource (R.raw.breaking_glass);
            // ---------------------------------------------------------------------
            // 14/02/2020 ECU indicate that the activity
            // ---------------------------------------------------------------------
            crackedScreen = true;
            // ---------------------------------------------------------------------
        }
        else
        {
            // ---------------------------------------------------------------------
            // 12/02/2020 ECU the activity has been recreated after having been
            //                destroyed by the Android OS
            // ---------------------------------------------------------------------
            finish ();
            // ---------------------------------------------------------------------
        }
    }
    // =============================================================================
    @Override
    public void onBackPressed ()
    {
        // -------------------------------------------------------------------------
        // 12/02/2020 ECU just finish this activity
        // 14/02/2020 ECU changed to use method
        // -------------------------------------------------------------------------
        finishActivity ();
        // -------------------------------------------------------------------------
        // 12/02/2020 ECU now call the super for this method
        // -------------------------------------------------------------------------
        super.onBackPressed ();
        // -------------------------------------------------------------------------
    }
    // =============================================================================
    @Override
    public void onDestroy()
    {
        // -------------------------------------------------------------------------
        // 14/02/2012 ECU added
        // -------------------------------------------------------------------------
        super.onDestroy();
        // -------------------------------------------------------------------------
    }
    // =============================================================================
    private void finishActivity ()
    {
        // -------------------------------------------------------------------------
        // 14/02/2020 ECU created to finish this activity and reset any variables
        // -------------------------------------------------------------------------
        // 14/02/2020 ECU indicate that this activity has finished
        // -------------------------------------------------------------------------
        crackedScreen = false;
        // -------------------------------------------------------------------------
        // 14/02/2020 ECU finish this activity
        // -------------------------------------------------------------------------
        finish ();
        // -------------------------------------------------------------------------
    }
    // =============================================================================
}
// =================================================================================
